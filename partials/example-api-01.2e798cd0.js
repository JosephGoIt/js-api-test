const t="https://65f2d1ae105614e6549efd32.mockapi.io/todos",e=document.getElementById("addBtn"),o=document.getElementById("myUL"),n=document.getElementById("myInput");function a(t,e,n){const a=document.createElement("li");a.id=n,o.appendChild(a),function(t,e,o){const n=document.createElement("input");n.type="checkbox",n.className="update",n.checked=o,t.appendChild(n)}(a,0,e),function(t,e){const o=document.createElement("span"),n=document.createTextNode(e);o.className="text",o.appendChild(n),t.appendChild(o)}(a,t),function(t){const e=document.createElement("span"),o=document.createTextNode("delete");e.className="close",e.appendChild(o),t.appendChild(e)}(a)}function c(t){return t.parentNode.id}window.addEventListener("DOMContentLoaded",(async function(){const e=await(async()=>{try{const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch todos");return await e.json()}catch(t){console.error(t)}})();console.log(e),alert("test"),e&&e.forEach((({text:t,isDone:e,id:o})=>a(t,e,o)))})),e.addEventListener("click",(async()=>{const e=n.value.trim();if(""===e)return void alert("Please enter a todo");const o={text:`${e}`,isDone:!1};await(async e=>{try{if(!(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Failed to add todo")}catch(t){console.error(t)}})(o),alert("test");const c=await async function(){try{const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch todos");const o=await e.json();return console.log(o),alert(o),Math.max(...o.map((t=>parseInt(t.id))))}catch(t){console.error(t)}}();console.log("ID of the new todo:"),a(e,!1,c)})),document.addEventListener("click",(async e=>{const o=e.target;if(o.classList.contains("close")){const e=c(o);await(async e=>{try{if(!(await fetch(`${t}/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete todo")}catch(t){console.error(t)}})(e),o.parentNode.remove()}})),o.addEventListener("change",(async e=>{const o=e.target;if(o.classList.contains("update")){const e=c(o),n=o.checked;console.log("Updating LI with ID:",e,"Is Done:",n),await(async(e,o)=>{try{if(!(await fetch(`${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Failed to update todo")}catch(t){console.error(t)}})(e,{isDone:n})}}));
//# sourceMappingURL=example-api-01.2e798cd0.js.map
